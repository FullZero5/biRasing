// src/constants/routeCoordinates.js
import { calculateRouteLength, calculateRaceTime } from '../utils/routeCalculations';

// Москва - маршрут по центру
export const moscowRoute = [
  [ 37.698137, 55.690272 ],
  [
    37.691013,
    55.691096
  ],
  [
    37.67256,
    55.686441
  ],
  [
    37.637798,
    55.683289
  ],
  [
    37.633077,
    55.684162
  ],
  [
    37.630245,
    55.685568
  ],
  [
    37.626297,
    55.694344
  ],
  [
    37.625868,
    55.699482
  ],
  [
    37.627184,
    55.706038
  ],
  [
    37.628428,
    55.707544
  ],
  [
    37.630445,
    55.708419
  ],
  [
    37.63445,
    55.708831
  ],
  [
    37.639084,
    55.70808
  ],
  [
    37.641445,
    55.707765
  ],
  [
    37.645178,
    55.708177
  ],
  [
    37.647968,
    55.709534
  ],
  [
    37.648569,
    55.710721
  ],
  [
    37.647882,
    55.71266
  ],
  [
    37.646766,
    55.714973
  ],
  [
    37.647281,
    55.717396
  ],
  [
    37.650629,
    55.719431
  ],
  [
    37.654834,
    55.72132
  ],
  [
    37.656293,
    55.723984
  ],
  [
    37.654577,
    55.727278
  ],
  [
    37.652946,
    55.728441
  ],
  [
    37.655693,
    55.729603
  ],
  [
    37.653332,
    55.730523
  ],
  [
    37.651144,
    55.732122
  ],
  [
    37.649384,
    55.734543
  ],
  [
    37.648225,
    55.737061
  ],
  [
    37.647128,
    55.739095
  ],
  [
    37.646098,
    55.74108
  ],
  [
    37.644639,
    55.742969
  ],
  [
    37.640347,
    55.747278
  ],
  [
    37.638266,
    55.748125
  ],
  [
    37.63539,
    55.748851
  ],
  [
    37.632546,
    55.749601
  ],
  [
    37.628748,
    55.749819
  ],
  [
    37.625207,
    55.749771
  ],
  [
    37.621645,
    55.74942
  ],
  [
    37.618791,
    55.749008
  ],
  [
    37.616023,
    55.748549
  ],
  [
    37.61362,
    55.747931
  ],
  [
    37.611346,
    55.747217
  ],
  [
    37.6095,
    55.745983
  ],
  [
    37.608041,
    55.744409
  ],
  [
    37.607183,
    55.743247
  ],
  [
    37.606925,
    55.741831
  ],
  [
    37.606239,
    55.740088
  ],
  [
    37.605949,
    55.739234
  ],
  [
    37.605316,
    55.738502
  ],
  [
    37.603299,
    55.737437
  ],
  [
    37.601475,
    55.736589
  ],
  [
    37.599179,
    55.735512
  ],
  [
    37.597763,
    55.734495
  ],
  [
    37.596132,
    55.733006
  ],
  [
    37.594566,
    55.731262
  ],
  [
    37.593471,
    55.729857
  ],
  [
    37.591841,
    55.727448
  ],
  [
    37.590853,
    55.726225
  ],
  [
    37.588815,
    55.724299
  ],
  [
    37.587528,
    55.723028
  ],
  [
    37.585875,
    55.721441
  ],
  [
    37.583772,
    55.719515
  ],
  [
    37.580661,
    55.717376
  ],
  [
    37.5777,
    55.715534
  ],
  [
    37.57579,
    55.714384
  ],
  [
    37.573623,
    55.713633
  ],
  [
    37.571306,
    55.712797
  ],
  [
    37.569138,
    55.712409
  ],
  [
    37.566685,
    55.711925
  ],
  [
    37.562348,
    55.711331
  ],
  [
    37.558829,
    55.711295
  ],
  [
    37.55576,
    55.71161
  ],
  [
    37.552756,
    55.71224
  ],
  [
    37.549931,
    55.713257
  ],
  [
    37.547421,
    55.714747
  ],
  [
    37.545146,
    55.716491
  ],
  [
    37.543998,
    55.717521
  ],
  [
    37.543279,
    55.718575
  ],
  [
    37.542657,
    55.720367
  ],
  [
    37.542786,
    55.721942
  ],
  [
    37.543601,
    55.723904
  ],
  [
    37.544953,
    55.72572
  ],
  [
    37.548064,
    55.72727
  ],
  [
    37.552141,
    55.728215
  ],
  [
    37.555832,
    55.729813
  ],
  [
    37.55875,
    55.731678
  ],
  [
    37.562913,
    55.733591
  ],
  [
    37.566861,
    55.73577
  ],
  [
    37.569179,
    55.737586
  ],
  [
    37.57184,
    55.740758
  ],
  [
    37.5745,
    55.744002
  ],
  [
    37.575788,
    55.745527
  ],
  [
    37.576131,
    55.748286
  ],
  [
    37.575444,
    55.750755
  ],
  [
    37.573084,
    55.752909
  ],
  [
    37.568878,
    55.75424
  ],
  [
    37.564201,
    55.754555
  ],
  [
    37.559652,
    55.754023
  ],
  [
    37.555789,
    55.752958
  ],
  [
    37.551584,
    55.751505
  ],
  [
    37.547335,
    55.749472
  ],
  [
    37.543644,
    55.747802
  ],
  [
    37.53946,
    55.74635
  ]
];

// Рязань - маршрут по городу
export const ryazanRoute = [
[39.676609,54.639430],
[39.676459,54.639473],
[39.676459,54.639494],
[39.676545,54.639452],
[39.676867,54.639430],
[39.678111,54.639087],
[39.681222,54.638143],
[39.682574,54.637713],
[39.683132,54.637499],
[39.686158,54.636555],
[39.686737,54.636405],
[39.686780,54.636362],
[39.686930,54.636340],
[39.688132,54.635954],
[39.688218,54.635954],
[39.688261,54.635911],
[39.688733,54.635804],
[39.690042,54.635353],
[39.690986,54.635117],
[39.693003,54.634473],
[39.694183,54.634173],
[39.698904,54.632649],
[39.699526,54.632413],
[39.699976,54.632306],
[39.700642,54.632070],
[39.700727,54.632070],
[39.700835,54.632006],
[39.701478,54.631791],
[39.702444,54.631512],
[39.703238,54.631233],
[39.703903,54.631062],
[39.706435,54.630289],
[39.709010,54.629452],
[39.710555,54.629045],
[39.711177,54.628959],
[39.711649,54.628916],
[39.712250,54.628916],
[39.714718,54.628980],
[39.715877,54.629066],
[39.716134,54.629045],
[39.719954,54.629173],
[39.720447,54.629152],
[39.722829,54.629216],
[39.724417,54.629195],
[39.725211,54.629238],
[39.726670,54.629195],
[39.731691,54.629152],
[39.732528,54.629109],
[39.734545,54.629087],
[39.735467,54.629109],
[39.735961,54.629195],
[39.736347,54.629345],
[39.739201,54.630911],
[39.742827,54.632821],
[39.743299,54.632950],
[39.743664,54.632928],
[39.744608,54.632821],
[39.744866,54.632671],
[39.744887,54.632735],
[39.745059,54.632778],
[39.746668,54.632821],
[39.747355,54.632885],
[39.747570,54.632993],
[39.747612,54.633229],
[39.747527,54.633765],
[39.747527,54.633937],
[39.747570,54.634109],
[39.747720,54.634237],
[39.748063,54.634366],
[39.748299,54.634387],
[39.749179,54.634194],
[39.750509,54.633958],
[39.752913,54.633915],
[39.753664,54.633873],
[39.754522,54.633765],
[39.754779,54.633787],
[39.755015,54.633851],
[39.755681,54.634173],
[39.755917,54.634366],
[39.756904,54.635031],
[39.757977,54.635696],
[39.758127,54.635696],
[39.758749,54.635267],
[39.759564,54.634817],
[39.761410,54.633636]
];

// Ростов-на-Дону - маршрут по городу
export const rostovRoute = [
[39.613537,47.196855],
[39.613645,47.195535],
[39.614550,47.194407],
[39.615985,47.193655],
[39.617360,47.193112],
[39.618680,47.192707],
[39.619972,47.192315],
[39.621292,47.191910],
[39.622677,47.191500],
[39.623935,47.191115],
[39.624895,47.190802],
[39.625175,47.190675],
[39.625352,47.190607],
[39.625842,47.190502],
[39.626345,47.190380],
[39.626990,47.190245],
[39.627130,47.190225],
[39.627450,47.190067],
[39.628142,47.189885],
[39.628970,47.189627],
[39.630332,47.189395],
[39.631667,47.189330],
[39.633380,47.189345],
[39.635412,47.188740],
[39.636705,47.187562],
[39.637335,47.186077],
[39.637975,47.184430],
[39.638620,47.182735],
[39.639210,47.181160],
[39.639730,47.179680],
[39.640220,47.178225],
[39.640907,47.176685],
[39.641725,47.175200],
[39.642347,47.174072],
[39.642817,47.173105],
[39.643325,47.171925],
[39.644245,47.170220],
[39.645690,47.168370],
[39.647852,47.166470],
[39.650160,47.164470],
[39.652457,47.162505],
[39.655007,47.160275],
[39.657322,47.158247],
[39.659392,47.156435],
[39.661925,47.154250],
[39.664385,47.152110],
[39.666645,47.150150],
[39.668930,47.148170],
[39.691455,47.141660],
[39.698112,47.143102],
[39.701012,47.145105],
[39.703377,47.146942],
[39.706630,47.148622],
[39.709830,47.149910],
[39.713005,47.151200],
[39.716150,47.152465],
[39.719332,47.153652],
[39.722640,47.154655],
[39.726020,47.155570],
[39.729382,47.156500],
[39.732395,47.157305],
[39.735010,47.157347],
[39.736632,47.156372],
[39.737095,47.155150],
[39.737192,47.154000],
[39.737345,47.152970],
[39.737532,47.151765],
[39.737710,47.150640],
[39.737877,47.149495],
[39.738090,47.148455],
[39.738220,47.147810],
[39.738227,47.147655],
[39.738375,47.146995],
[39.738547,47.146130],
[39.738750,47.145265],
[39.738957,47.144297],
[39.739190,47.143352],
[39.739310,47.142720],
[39.739310,47.142712],
[39.739392,47.142277],
[39.739577,47.141415],
[39.739707,47.140795],
[39.739967,47.139892],
[39.740145,47.139267],
[39.740150,47.139240],
[39.740225,47.139010],
[39.740347,47.138535],
[39.740512,47.137950],
[39.740647,47.137500],
[39.740810,47.137065],
[39.740845,47.136960],
[39.741160,47.136122],
[39.741592,47.134915],
[39.742085,47.133682],
[39.742577,47.132237],
[39.742997,47.130895],
[39.743365,47.129635],
[39.743467,47.128295],
[39.743487,47.127095],
[39.743485,47.126070],
[39.743510,47.125062],
[39.743545,47.123735],
[39.743505,47.122320],
[39.743547,47.121090],
[39.743560,47.120905],
[39.743565,47.120305],
[39.743585,47.119072],
[39.743622,47.118045],
[39.743662,47.117942],
[39.744352,47.117877],
[39.745955,47.117855],
[39.747150,47.117840],
[39.747210,47.117825],
[39.747312,47.117780],
[39.748610,47.117765],
[39.750077,47.117740],
[39.751000,47.117622],
[39.751000,47.117085],
[39.750665,47.116470],
[39.750130,47.115577],
[39.750035,47.115382],
[39.749890,47.115175],
[39.749302,47.114122],
[39.748562,47.112790],
[39.747812,47.111385]
];

// Санкт-Петербург
export const petersburgRoute = [
[30.342585,59.908249],
[30.347084,59.914596],
[30.349830,59.914111],
[30.345388,59.907559],
[30.338822,59.900769],
[30.336462,59.898247],
[30.331441,59.895293],
[30.327235,59.893783],
[30.319725,59.892145],
[30.318824,59.891994],
[30.318953,59.891153],
[30.319339,59.888263],
[30.319725,59.882137],
[30.320583,59.862524],
[30.321098,59.852185],
[30.238529,59.851797],
[30.235182,59.851063],
[30.226684,59.848126]
];

// Конфигурация городов
export const CITIES = {
  MOSCOW: {
    name: 'Москва',
    route: moscowRoute,
    center: [37.6173, 55.7558],
    zoom: 11,
    description: 'Столичная велогонка по историческому центру'
  },
  RYAZAN: {
    name: 'Рязань',
    route: ryazanRoute,
    center: [39.7386, 54.6269],
    zoom: 12,
    description: 'Гонка по древнему русскому городу'
  },
  ROSTOV: {
    name: 'Ростов-на-Дону',
    route: rostovRoute,
    center: [39.7229, 47.2357],
    zoom: 11,
    description: 'Южная велогонка по донским просторам'
  },
  PETERSBURG: {
    name: 'Санкт-Петербург',
    route: petersburgRoute,
    center: [30.3158, 59.9391],
    zoom: 11,
    description: 'Северная столица встречает гонщиков'
  }
};

// Утилиты для работы с городами
export const getRandomCity = () => {
  const cityKeys = Object.keys(CITIES);
  const randomKey = cityKeys[Math.floor(Math.random() * cityKeys.length)];
  return CITIES[randomKey];
};

export const getCityByName = (cityName) => {
  const upperName = cityName?.toUpperCase();
  return CITIES[upperName] || getRandomCity();
};

export const getAllCities = () => Object.values(CITIES);

// Получение информации о маршруте
export const getRouteInfo = (route) => {
  if (!route || route.length < 2) {
    return { length: 0, pointCount: 0, estimatedTime: '0 мин' };
  }

  const length = calculateRouteLength(route);
  const timeInfo = calculateRaceTime(length);

  return {
    length: Math.round(length * 10) / 10,
    pointCount: route.length,
    estimatedTime: timeInfo.formatted,
    preciseLength: length
  };
};

export default {
  CITIES,
  getRandomCity,
  getCityByName,
  getAllCities,
  getRouteInfo
};